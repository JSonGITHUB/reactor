{"ast":null,"code":"\"use strict\";\n\n/**\n * implements https://w3c.github.io/accname/\n */\nvar _createForOfIteratorHelper = require(\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _toConsumableArray = require(\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar getRole_1 = __importDefault(require(\"./getRole\"));\nvar util_1 = require(\"./util\");\n/**\n * Small utility that handles all the JS quirks with `this` which is important\n * if no mock is provided.\n * @param element\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n */\nfunction createGetComputedStyle(element, options) {\n  var window = util_1.safeWindow(element);\n  var _options$getComputedS = options.getComputedStyle,\n    getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS;\n  return getComputedStyle;\n}\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n/**\n * https://w3c.github.io/aria/#namefromprohibited\n */\nfunction prohibitsNaming(node) {\n  return hasAnyConcreteRoles(node, [\"caption\", \"code\", \"deletion\", \"emphasis\", \"generic\", \"insertion\", \"paragraph\", \"presentation\", \"strong\", \"subscript\", \"superscript\"]);\n}\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\nfunction isHidden(node, options) {\n  if (!util_1.isElement(node)) {\n    return false;\n  }\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n  var style = createGetComputedStyle(node, options)(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n/**\n *\n * @param {Node} node -\n * @param {string} attributeName -\n * @returns {Element[]} -\n */\nfunction idRefs(node, attributeName) {\n  if (util_1.isElement(node) && node.hasAttribute(attributeName)) {\n    // safe due to hasAttribute check\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    var ids = node.getAttribute(attributeName).split(\" \");\n    return ids\n    // safe since it can't be null for an Element\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    .map(function (id) {\n      return node.ownerDocument.getElementById(id);\n    }).filter(function (element) {\n      return element !== null;\n    }\n    // TODO: why does this not narrow?\n    );\n  }\n\n  return [];\n}\n/**\n * All defined children. This include childNodes as well as owned (portaled) trees\n * via aria-owns\n * @param node\n */\nfunction queryChildNodes(node) {\n  return Array.from(node.childNodes).concat(idRefs(node, \"aria-owns\"));\n}\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\nfunction hasAbstractRole(node, role) {\n  if (!util_1.isElement(node)) {\n    return false;\n  }\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n    default:\n      throw new TypeError(\"No knowledge about abstract role '\".concat(role, \"'. This is likely a bug :(\"));\n  }\n}\nfunction hasAnyConcreteRoles(node, roles) {\n  if (util_1.isElement(node)) {\n    return roles.indexOf(getRole_1.default(node)) !== -1;\n  }\n  return false;\n}\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\nfunction querySelectorAllSubtree(element, selectors) {\n  var elements = [];\n  for (var _i = 0, _arr = [element].concat(_toConsumableArray(idRefs(element, \"aria-owns\"))); _i < _arr.length; _i++) {\n    var root = _arr[_i];\n    elements.push.apply(elements, _toConsumableArray(Array.from(root.querySelectorAll(selectors))));\n  }\n  return elements;\n}\nfunction querySelectedOptions(listbox) {\n  if (util_1.isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n/**\n * TODO\n */\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return false;\n}\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n/**\n * TODO\n */\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement(node) {\n  return false;\n}\n/**\n * TODO\n */\nfunction computeTooltipAttributeValue(node) {\n  return null;\n}\nfunction getValueOfTextbox(element) {\n  if (util_1.isHTMLInputElement(element) || util_1.isHTMLTextAreaElement(element)) {\n    return element.value;\n  }\n  // https://github.com/eps1lon/dom-accessibility-api/issues/4\n  return element.textContent || \"\";\n}\nfunction getTextualContent(declaration) {\n  var content = declaration.getPropertyValue(\"content\");\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n  return \"\";\n}\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param [options]\n * @parma [options.getComputedStyle] - mock window.getComputedStyle. Needs `content`, `display` and `visibility`\n */\nfunction computeAccessibleName(root) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var consultedNodes = new Set();\n  if (prohibitsNaming(root)) {\n    return \"\";\n  }\n  // 2F.i\n  function computeMiscTextAlternative(node, context) {\n    var accumulatedText = \"\";\n    if (util_1.isElement(node)) {\n      var pseudoBefore = createGetComputedStyle(node, options)(node, \"::before\");\n      var beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = \"\".concat(beforeContent, \" \").concat(accumulatedText);\n    }\n    var _iterator = _createForOfIteratorHelper(queryChildNodes(node)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var child = _step.value;\n        var result = computeTextAlternative(child, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: false,\n          recursion: true\n        });\n        // TODO: Unclear why display affects delimiter\n        var display = util_1.isElement(node) && createGetComputedStyle(node, options)(node).getPropertyValue(\"display\");\n        var separator = display !== \"inline\" ? \" \" : \"\";\n        accumulatedText += \"\".concat(separator).concat(result);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (util_1.isElement(node)) {\n      var pseudoAfter = createGetComputedStyle(node, options)(node, \":after\");\n      var afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = \"\".concat(accumulatedText, \" \").concat(afterContent);\n    }\n    return accumulatedText;\n  }\n  /**\n   * TODO: placeholder\n   */\n  function computeAttributeTextAlternative(node) {\n    if (!util_1.isElement(node)) {\n      return null;\n    }\n    var titleAttribute = node.getAttributeNode(\"title\");\n    if (titleAttribute !== null && !consultedNodes.has(titleAttribute)) {\n      consultedNodes.add(titleAttribute);\n      return titleAttribute.value;\n    }\n    var altAttribute = node.getAttributeNode(\"alt\");\n    if (altAttribute !== null && !consultedNodes.has(altAttribute)) {\n      consultedNodes.add(altAttribute);\n      return altAttribute.value;\n    }\n    if (util_1.isHTMLInputElement(node) && node.type === \"button\") {\n      consultedNodes.add(node);\n      return node.getAttribute(\"value\") || \"\";\n    }\n    return null;\n  }\n  function computeElementTextAlternative(node) {\n    if (!util_1.isHTMLInputElement(node)) {\n      return null;\n    }\n    var input = node;\n    // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n    if (input.type === \"submit\") {\n      return \"Submit\";\n    }\n    if (input.type === \"reset\") {\n      return \"Reset\";\n    }\n    var labels = input.labels;\n    // IE11 does not implement labels, TODO: verify with caniuse instead of mdn\n    if (labels === null || labels === undefined || labels.length === 0) {\n      return null;\n    }\n    consultedNodes.add(input);\n    return Array.from(labels).map(function (element) {\n      return computeTextAlternative(element, {\n        isEmbeddedInLabel: true,\n        isReferenced: false,\n        recursion: true\n      });\n    }).filter(function (label) {\n      return label.length > 0;\n    }).join(\" \");\n  }\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    }\n    // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n    // 2A\n    if (isHidden(current, options) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    }\n    // 2B\n    var labelElements = idRefs(current, \"aria-labelledby\");\n    if (!context.isReferenced && labelElements.length > 0) {\n      return labelElements.map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: true,\n          // thais isn't recursion as specified, otherwise we would skip\n          // `aria-label` in\n          // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n          recursion: false\n        });\n      }).join(\" \");\n    }\n    // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n    var skipToStep2E = context.recursion && isControl(current);\n    if (!skipToStep2E) {\n      var ariaLabel = (util_1.isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n      if (ariaLabel !== \"\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      }\n      // 2D\n      if (!isMarkedPresentational(current)) {\n        var elementTextAlternative = computeElementTextAlternative(current);\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n        var attributeTextAlternative = computeAttributeTextAlternative(current);\n        if (attributeTextAlternative !== null) {\n          consultedNodes.add(current);\n          return attributeTextAlternative;\n        }\n      }\n    }\n    // 2E\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        var selectedOptions = querySelectedOptions(current);\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return util_1.isHTMLInputElement(current) ? current.value : \"\";\n        }\n        return Array.from(selectedOptions).map(function (selectedOption) {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // safe due to hasAttribute guard\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return current.getAttribute(\"aria-valuetext\");\n        }\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // safe due to hasAttribute guard\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return current.getAttribute(\"aria-valuenow\");\n        }\n        // Otherwise, use the value as specified by a host language attribute.\n        return current.getAttribute(\"value\") || \"\";\n      }\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    }\n    // 2F: https://w3c.github.io/accname/#step2F\n    if (allowsNameFromContent(current) || util_1.isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n    var tooltipAttributeValue = computeTooltipAttributeValue(current);\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    }\n    // TODO should this be reachable?\n    consultedNodes.add(current);\n    return \"\";\n  }\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    isReferenced: false,\n    recursion: false\n  }));\n}\nexports.computeAccessibleName = computeAccessibleName;","map":{"version":3,"names":["_createForOfIteratorHelper","require","default","_toConsumableArray","getRole_1","__importDefault","util_1","createGetComputedStyle","element","options","window","safeWindow","_options$getComputedS","getComputedStyle","bind","asFlatString","s","trim","replace","prohibitsNaming","node","hasAnyConcreteRoles","isHidden","isElement","hasAttribute","getAttribute","style","getPropertyValue","idRefs","attributeName","ids","split","map","id","ownerDocument","getElementById","filter","queryChildNodes","Array","from","childNodes","concat","isControl","hasAbstractRole","role","TypeError","roles","indexOf","querySelectorAllSubtree","selectors","elements","_i","_arr","length","root","push","apply","querySelectorAll","querySelectedOptions","listbox","isHTMLSelectElement","selectedOptions","isMarkedPresentational","isNativeHostLanguageTextAlternativeElement","allowsNameFromContent","isDescendantOfNativeHostLanguageTextAlternativeElement","computeTooltipAttributeValue","getValueOfTextbox","isHTMLInputElement","isHTMLTextAreaElement","value","textContent","getTextualContent","declaration","content","test","slice","computeAccessibleName","arguments","undefined","consultedNodes","Set","computeMiscTextAlternative","context","accumulatedText","pseudoBefore","beforeContent","_iterator","_step","n","done","child","result","computeTextAlternative","isEmbeddedInLabel","isReferenced","recursion","display","separator","err","e","f","pseudoAfter","afterContent","computeAttributeTextAlternative","titleAttribute","getAttributeNode","has","add","altAttribute","type","computeElementTextAlternative","input","labels","label","join","current","labelElements","skipToStep2E","ariaLabel","elementTextAlternative","attributeTextAlternative","selectedOption","nodeType","TEXT_NODE","tooltipAttributeValue","exports"],"sources":["../sources/accessible-name.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script"}