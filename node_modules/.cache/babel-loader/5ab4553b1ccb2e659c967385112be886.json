{"ast":null,"code":"import _classCallCheck from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import LogEntry from'./LogEntry.js';import Loader from'./utils/Loader.js';var Logger=/*#__PURE__*/function(_React$Component){_inherits(Logger,_React$Component);var _super=_createSuper(Logger);function Logger(props){var _this;_classCallCheck(this,Logger);_this=_super.call(this,props);_this.templateData={Day:{Date:\"2020-01-17T08:00:00.000Z\",Day:17,Month:1,Year:2020},Location:{Break:\"Notch\"},Swell:{Direction:\"NW\",Height:\"head high\",Report:\"4ft\"},Tide:{Phase:\"High => Low\",Height:\"2ft\"},Wind:{Direction:\"NW\",Orientation:\"Offshore\",MPH:\"5mph\",Surface:\"Glassy\"},Conditions:{Conditions:\"Firing\"},Comments:{\"notes\":\"Biggest crowd but plenty of sick ones...\"}};_this.getLocalLastRecordId=function(){return localStorage.getItem(\"lastPostId\");};_this.lastRecordIdExists=function(){return _this.getLocalLastRecordId()===null?false:true;};_this.lastRecordExists=function(){return _this.lastRecordIdExists()===true&&localStorage.getItem(_this.getLocalLastRecordId())!==null?true:false;};_this.getLastRecordId=localStorage.getItem(\"lastPostId\");_this.getLogId=function(){return _this.props.location.state===undefined||_this.props.location.state===\"\"?localStorage.getItem(\"lastPostId\"):_this.props.location.state.logId.item;};_this.getStateLog=function(){return _this.state.log;};console.log(\"Logger => constructor -> props.logId: \".concat(_this.getLogId()));console.log(\"Logger => constructor -> localStorage.getItem: \".concat(_this.getLogId(),\" ====> \").concat(localStorage.getItem(_this.getLogId())));if(_this.getLogId()===null){_this.log=_this.templateData;}else{_this.log=JSON.parse(localStorage.getItem(_this.getLogId()));}_this.state={date:new Date(),log:_this.log,items:[],isLoaded:false,logId:_this.getLogId()};_this.updateLog=_this.updateLog.bind(_assertThisInitialized(_this));_this.getStateLog=_this.getStateLog.bind(_assertThisInitialized(_this));return _this;}_createClass(Logger,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//const getLastId = () => (localStorage.getItem(localStorage.getItem(\"lastPostId\")) === null) ? this.postDirectory[this.postDirectory.length-1] : localStorage.getItem(\"lastPostId\");\n//const logId = (this.props.location.state === undefined) ? getLastId() : this.props.location.state.logId.item;\n//console.log(`Logger => componentDidMount -> logId: ${logId}`)\nvar data;var returnJSON=function returnJSON(response){return response.json();};var returnRejection=function returnRejection(response){return Promise.reject({status:response.status,data:data});};var validate=function validate(response){return response.ok?returnJSON(response):returnRejection(response);};var requestInit={method:'GET',headers:{'Content-Type':'application/json'},mode:'cors',cache:'default'};//const uri = new Request('https://jsongithub.github.io/portfolio/assets/data/appData.json', requestInit);\n//GOOD const uri = 'https://jsongithub.github.io/portfolio/assets/data/appData.json';\nvar uri='https://jsongithub.github.io/portfolio/assets/data/appData.json';//const uri = 'localhost:8080/writeSurfLog.json';\nfetch(uri).then(function(response){return validate(response);}).then(function(data){_this2.setState({isLoaded:true,items:data,logId:_this2.getLogId()});}).catch(function(err){return console.log(\"Something went wrong!\\nuri: \".concat(uri,\" \\npath: \").concat(window.location.pathname,\"\\n\"),err);});}},{key:\"updateLog\",value:function updateLog(groupTitle,label,selected,set){this.log[groupTitle][label]=selected;if(groupTitle!==undefined&&groupTitle!==1&&selected!==undefined&&set){this.setState({log:this.log});}}},{key:\"render\",value:function render(){var _this$state=this.state,isLoaded=_this$state.isLoaded,items=_this$state.items;//console.log(`Logger => ${JSON.stringify(this.state, null, 2)}`);\nvar appInterface=/*#__PURE__*/React.createElement(\"div\",{className:\"App-content fadeIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"},/*#__PURE__*/React.createElement(Loader,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"}));if(isLoaded){appInterface=/*#__PURE__*/React.createElement(\"div\",{className:\"App-content fadeIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"},/*#__PURE__*/React.createElement(LogEntry,{logId:this.getLogId(),onChange:this.updateLog,getStateLog:this.getStateLog,title:\"Session Log\",message:\"Add your session data\",buttonLabel:\"submit\",items:items})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex3Column\"}));}return appInterface;}}]);return Logger;}(React.Component);export default Logger;","map":{"version":3,"sources":["/Users/js/Dev/my-first-reactor/src/components/Logger.js"],"names":["React","LogEntry","Loader","Logger","props","templateData","Day","Date","Month","Year","Location","Break","Swell","Direction","Height","Report","Tide","Phase","Wind","Orientation","MPH","Surface","Conditions","Comments","getLocalLastRecordId","localStorage","getItem","lastRecordIdExists","lastRecordExists","getLastRecordId","getLogId","location","state","undefined","logId","item","getStateLog","log","console","JSON","parse","date","items","isLoaded","updateLog","bind","data","returnJSON","response","json","returnRejection","Promise","reject","status","validate","ok","requestInit","method","headers","mode","cache","uri","fetch","then","setState","catch","err","window","pathname","groupTitle","label","selected","set","appInterface","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport LogEntry from './LogEntry.js';\nimport Loader from './utils/Loader.js';\nclass Logger extends React.Component {\n\n    templateData = {\n        Day: {\n            Date: \"2020-01-17T08:00:00.000Z\",\n            Day: 17,\n            Month: 1,\n            Year: 2020\n        },\n        Location: {\n            Break: \"Notch\"\n        },\n        Swell: {\n            Direction: \"NW\",\n            Height: \"head high\",\n            Report: \"4ft\"\n        },\n        Tide: {\n            Phase: \"High => Low\",\n            Height: \"2ft\"\n        },\n        Wind: {\n            Direction: \"NW\",\n            Orientation: \"Offshore\",\n            MPH: \"5mph\",\n            Surface: \"Glassy\"\n        },\n        Conditions: {\n            Conditions: \"Firing\"\n        },\n        Comments: {\n            \"notes\": \"Biggest crowd but plenty of sick ones...\"\n        }\n    };\n    getLocalLastRecordId = () => localStorage.getItem(\"lastPostId\");\n    lastRecordIdExists = () => (this.getLocalLastRecordId() === null) ? false : true; \n    lastRecordExists = () => (this.lastRecordIdExists() === true && localStorage.getItem(this.getLocalLastRecordId()) !== null) ? true : false\n    getLastRecordId = localStorage.getItem(\"lastPostId\")\n    getLogId = () => (this.props.location.state === undefined || this.props.location.state === \"\") ? localStorage.getItem(\"lastPostId\") : this.props.location.state.logId.item;\n    \n    constructor(props) {\n        super(props);\n        console.log(`Logger => constructor -> props.logId: ${this.getLogId()}`)\n        console.log(`Logger => constructor -> localStorage.getItem: ${this.getLogId()} ====> ${localStorage.getItem(this.getLogId())}`)\n        if (this.getLogId() === null) {\n            this.log = this.templateData;\n        } else {\n            this.log = JSON.parse(localStorage.getItem(this.getLogId()));\n        }\n        this.state = {\n            date: new Date(),\n            log: this.log,\n            items: [],\n            isLoaded: false,\n            logId: this.getLogId()\n        };\n        this.updateLog = this.updateLog.bind(this);\n        this.getStateLog = this.getStateLog.bind(this);\n    }\n    componentDidMount() {\n        //const getLastId = () => (localStorage.getItem(localStorage.getItem(\"lastPostId\")) === null) ? this.postDirectory[this.postDirectory.length-1] : localStorage.getItem(\"lastPostId\");\n        //const logId = (this.props.location.state === undefined) ? getLastId() : this.props.location.state.logId.item;\n        //console.log(`Logger => componentDidMount -> logId: ${logId}`)\n        let data;\n        const returnJSON = (response) => response.json();\n        const returnRejection = (response) => Promise.reject({status: response.status, data});\n        const validate = (response) => (response.ok) ? returnJSON(response) : returnRejection(response);\n        const requestInit = {\n            method:'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            mode: 'cors',\n            cache: 'default'\n        };\n        //const uri = new Request('https://jsongithub.github.io/portfolio/assets/data/appData.json', requestInit);\n        //GOOD const uri = 'https://jsongithub.github.io/portfolio/assets/data/appData.json';\n        const uri = 'https://jsongithub.github.io/portfolio/assets/data/appData.json';\n        //const uri = 'localhost:8080/writeSurfLog.json';\n        fetch(uri)\n            .then(response => validate(response))\n            .then(data => {\n                this.setState({\n                    isLoaded: true,\n                    items: data,\n                    logId: this.getLogId()\n                })\n            })\n            .catch(err => console.log(`Something went wrong!\\nuri: ${uri} \\npath: ${window.location.pathname}\\n`, err));\n       \n    }\n\n    updateLog(groupTitle, label, selected, set) {\n        this.log[groupTitle][label] = selected;\n        if (groupTitle !== undefined && groupTitle !== 1 && selected !== undefined && set) {\n            this.setState({log: this.log});\n        }\n    }\n    getStateLog = () => this.state.log;\n    \n    render() {      \n        let {isLoaded, items} = this.state;           \n        //console.log(`Logger => ${JSON.stringify(this.state, null, 2)}`);\n        let appInterface = <div className=\"App-content fadeIn\">\n                                <div className=\"flex3Column\"></div>\n                                <div className=\"flex3Column\">\n                                    <Loader />\n                                </div>\n                                <div className=\"flex3Column\"></div>\n                            </div>;\n        if (isLoaded) {\n            appInterface = <div className=\"App-content fadeIn\">\n                <div className=\"flex3Column\"></div>\n                <div className=\"flex3Column\">\n                    <LogEntry\n                        logId={this.getLogId()}\n                        onChange={this.updateLog} \n                        getStateLog={this.getStateLog} \n                        title=\"Session Log\" \n                        message=\"Add your session data\"  \n                        buttonLabel=\"submit\" \n                        items={items}\n                    />\n                </div>\n                <div className=\"flex3Column\"></div>\n            </div>\n            \n        }\n        return (\n            appInterface            \n        )\n    }\n    \n}\nexport default Logger;"]},"metadata":{},"sourceType":"module"}