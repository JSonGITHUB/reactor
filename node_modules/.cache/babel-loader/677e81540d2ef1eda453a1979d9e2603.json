{"ast":null,"code":"import _regeneratorRuntime from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _ from'lodash';import jsonPlaceholder from'../../apis/jsonPlaceholder.js';var fetchPostsAndUsers=function fetchPostsAndUsers(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchPosts());case 2://const userIds = _.uniq(_.map(getState().posts, 'userId'));\n//userIds.forEach(id => dispatch(fetchUser(id)))\n_.chain(getState().posts).map('userId').uniq().forEach(function(id){return dispatch(fetchUser(id));}).value();case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};var fetchPosts=function fetchPosts(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return jsonPlaceholder.get('/posts');case 2:response=_context2.sent;//console.log(`BlogActions => FETCH_POSTS => fetchPosts => \\nresponse: ${JSON.stringify(response.data,null,2)}`);\ndispatch({type:'FETCH_POSTS',payload:response.data});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}();};var fetchUser=function fetchUser(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return jsonPlaceholder.get(\"/users/\".concat(id));case 2:response=_context3.sent;dispatch({type:'FETCH_USER',payload:response.data});case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x4){return _ref3.apply(this,arguments);};}();};/*\nconst fetchUser = id => dispatch => _fetchUser(id, dispatch);\nconst _fetchUser = _.memoize(async (id, dispatch) => {\n    const response = await jsonPlaceholder.get(`/users/${id}`);\n    dispatch({\n        type: 'FETCH_USER', \n        payload: response.data\n    });\n});\n*/export{fetchPosts,fetchUser,fetchPostsAndUsers};","map":{"version":3,"names":["_","jsonPlaceholder","fetchPostsAndUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","getState","wrap","_callee$","_context","prev","next","fetchPosts","chain","posts","map","uniq","forEach","id","fetchUser","value","stop","_x","_x2","apply","arguments","_ref2","_callee2","response","_callee2$","_context2","get","sent","type","payload","data","_x3","_ref3","_callee3","_callee3$","_context3","concat","_x4"],"sources":["/Users/js/Dev/my-first-reactor/src/components/blog/BlogActions.js"],"sourcesContent":["import _ from 'lodash';\nimport jsonPlaceholder from '../../apis/jsonPlaceholder.js';\n\nconst fetchPostsAndUsers = () => async (dispatch, getState) => {\n    await dispatch(fetchPosts());\n\n    //const userIds = _.uniq(_.map(getState().posts, 'userId'));\n    //userIds.forEach(id => dispatch(fetchUser(id)))\n\n    _.chain(getState().posts)\n        .map('userId')\n        .uniq()\n        .forEach(id => dispatch(fetchUser(id)))\n        .value();\n    \n} \n\nconst fetchPosts = () => async dispatch => {\n    const response = await jsonPlaceholder.get('/posts');\n    //console.log(`BlogActions => FETCH_POSTS => fetchPosts => \\nresponse: ${JSON.stringify(response.data,null,2)}`);\n    dispatch({ \n        type: 'FETCH_POSTS', \n        payload: response.data\n    })\n};\n\nconst fetchUser = id => async dispatch => {\n    const response = await jsonPlaceholder.get(`/users/${id}`);\n    dispatch({\n        type: 'FETCH_USER', \n        payload: response.data\n    });\n}\n\n/*\nconst fetchUser = id => dispatch => _fetchUser(id, dispatch);\nconst _fetchUser = _.memoize(async (id, dispatch) => {\n    const response = await jsonPlaceholder.get(`/users/${id}`);\n    dispatch({\n        type: 'FETCH_USER', \n        payload: response.data\n    });\n});\n*/\n\nexport { fetchPosts, fetchUser, fetchPostsAndUsers }"],"mappings":"wPAAA,MAAO,CAAAA,CAAC,KAAM,QAAQ,CACtB,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAE3D,GAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,oCAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAS,SAAAC,QAAOC,QAAQ,CAAEC,QAAQ,SAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SAChD,CAAAN,QAAQ,CAACO,UAAU,CAAC,CAAC,CAAC,QAE5B;AACA;AAEAf,CAAC,CAACgB,KAAK,CAACP,QAAQ,CAAC,CAAC,CAACQ,KAAK,CAAC,CACpBC,GAAG,CAAC,QAAQ,CAAC,CACbC,IAAI,CAAC,CAAC,CACNC,OAAO,CAAC,SAAAC,EAAE,QAAI,CAAAb,QAAQ,CAACc,SAAS,CAACD,EAAE,CAAC,CAAC,GAAC,CACtCE,KAAK,CAAC,CAAC,CAAC,wBAAAX,QAAA,CAAAY,IAAA,MAAAjB,OAAA,GAEhB,mBAAAkB,EAAA,CAAAC,GAAA,SAAAvB,IAAA,CAAAwB,KAAA,MAAAC,SAAA,UAED,GAAM,CAAAb,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,oCAAAc,KAAA,CAAAzB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAS,SAAAwB,SAAMtB,QAAQ,MAAAuB,QAAA,QAAA1B,mBAAA,GAAAK,IAAA,UAAAsB,UAAAC,SAAA,iBAAAA,SAAA,CAAApB,IAAA,CAAAoB,SAAA,CAAAnB,IAAA,SAAAmB,SAAA,CAAAnB,IAAA,SACZ,CAAAb,eAAe,CAACiC,GAAG,CAAC,QAAQ,CAAC,QAA9CH,QAAQ,CAAAE,SAAA,CAAAE,IAAA,CACd;AACA3B,QAAQ,CAAC,CACL4B,IAAI,CAAE,aAAa,CACnBC,OAAO,CAAEN,QAAQ,CAACO,IACtB,CAAC,CAAC,yBAAAL,SAAA,CAAAT,IAAA,MAAAM,QAAA,GACL,mBAAAS,GAAA,SAAAV,KAAA,CAAAF,KAAA,MAAAC,SAAA,UAED,GAAM,CAAAN,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAGD,EAAE,oCAAAmB,KAAA,CAAApC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAmC,SAAMjC,QAAQ,MAAAuB,QAAA,QAAA1B,mBAAA,GAAAK,IAAA,UAAAgC,UAAAC,SAAA,iBAAAA,SAAA,CAAA9B,IAAA,CAAA8B,SAAA,CAAA7B,IAAA,SAAA6B,SAAA,CAAA7B,IAAA,SACX,CAAAb,eAAe,CAACiC,GAAG,WAAAU,MAAA,CAAWvB,EAAE,CAAE,CAAC,QAApDU,QAAQ,CAAAY,SAAA,CAAAR,IAAA,CACd3B,QAAQ,CAAC,CACL4B,IAAI,CAAE,YAAY,CAClBC,OAAO,CAAEN,QAAQ,CAACO,IACtB,CAAC,CAAC,CAAC,wBAAAK,SAAA,CAAAnB,IAAA,MAAAiB,QAAA,GACN,mBAAAI,GAAA,SAAAL,KAAA,CAAAb,KAAA,MAAAC,SAAA,UAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEA,OAASb,UAAU,CAAEO,SAAS,CAAEpB,kBAAkB"},"metadata":{},"sourceType":"module"}