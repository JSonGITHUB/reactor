{"ast":null,"code":"import _regeneratorRuntime from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/js/Dev/my-first-reactor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import DropDown from'./DropDown.js';import debounceType from'./utils/DebouncerType.js';var WikiSearch=function WikiSearch(){var options=[{label:'Green',value:'green'},{label:'Red',value:'red'},{label:'Yellow',value:'yellow'}];var _useState=useState(options[0]),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),term=_useState4[0],setTerm=_useState4[1];var _useState5=useState(term),_useState6=_slicedToArray(_useState5,2),debouncedTerm=_useState6[0],setDebouncedTerm=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),results=_useState8[0],setResults=_useState8[1];var _useState9=useState(options[2].value),_useState10=_slicedToArray(_useState9,2),bkgColor=_useState10[0],setBkgColor=_useState10[1];//console.log(results);\n//always invoked on mount \n//and when any value changes in the dependancy array\nuseEffect(function(){/*\n        const timerId = setTimeout(() => {\n            setDebouncedTerm(term);\n        }, 1000);\n\n        return () => {\n            clearTimeout(timerId);\n        };\n        */debounceType(setDebouncedTerm,term);},[term]);useEffect(function(){var search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://en.wikipedia.org/w/api.php',{params:{action:'query',list:'search',origin:'*',format:'json',srsearch:debouncedTerm}});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setResults(data.query.search);case 5:case\"end\":return _context.stop();}}},_callee);}));return function search(){return _ref.apply(this,arguments);};}();if(debouncedTerm&&!results.length){search();}else{var timeoutId=setTimeout(function(){if(debouncedTerm){search();}},1000);return function(){clearTimeout(timeoutId);};}},[debouncedTerm,results.length]);var goToLink=function goToLink(link){return window.location.href=link;};var renderedLinkResults=results.map(function(result){return/*#__PURE__*/React.createElement(\"a\",{href:\"https://en.wikipedia.org?curid=\".concat(result.pageid),className:\"maxWidth400 button p-10 lowerBorder pointer color-yellow\",key:result.pageid},/*#__PURE__*/React.createElement(\"div\",{className:\"color-yellow bold p-10 columnLeft\"},result.title),/*#__PURE__*/React.createElement(\"div\",{className:\"p-10 mb-5 columnLeft white\"},/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:result.snippet}})));});var renderedDivResults=results.map(function(result){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return goToLink(\"https://en.wikipedia.org?curid=\".concat(result.pageid));},className:\"maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow\",key:result.pageid},/*#__PURE__*/React.createElement(\"div\",{className:\"color-yellow bold p-10 columnLeft\"},result.title),/*#__PURE__*/React.createElement(\"div\",{className:\"p-10 mb-5 columnLeft white\"},/*#__PURE__*/React.createElement(\"span\",{dangerouslySetInnerHTML:{__html:result.snippet}})));});console.log(\"selected: \".concat(selected.value));var selectedBackground=\"bg-\".concat(selected.value);return/*#__PURE__*/React.createElement(\"div\",{className:\"m-20\"},/*#__PURE__*/React.createElement(\"div\",{className:\"directory sides-auto\"},/*#__PURE__*/React.createElement(DropDown,{label:\"Select a color:\",options:options,selected:selected,onSelectionChange:setSelected})),/*#__PURE__*/React.createElement(\"div\",{className:\"ui form mt-20\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flexContainer \".concat(selectedBackground,\" r-10 p-10\")},/*#__PURE__*/React.createElement(\"label\",{className:\"greet flex2Column10Percent p-10\"},/*#__PURE__*/React.createElement(\"span\",null,\"Search: \")),/*#__PURE__*/React.createElement(\"input\",{value:term,onChange:function onChange(e){return setTerm(e.target.value);},className:\"input flex2Column\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ui celled list\"},renderedDivResults));};export default WikiSearch;","map":{"version":3,"sources":["/Users/js/Dev/my-first-reactor/src/components/WikiSearch.js"],"names":["React","useState","useEffect","axios","DropDown","debounceType","WikiSearch","options","label","value","selected","setSelected","term","setTerm","debouncedTerm","setDebouncedTerm","results","setResults","bkgColor","setBkgColor","search","get","params","action","list","origin","format","srsearch","data","query","length","timeoutId","setTimeout","clearTimeout","goToLink","link","window","location","href","renderedLinkResults","map","result","pageid","title","__html","snippet","renderedDivResults","console","log","selectedBackground","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport DropDown from './DropDown.js';\nimport debounceType from './utils/DebouncerType.js';\n\nconst WikiSearch = () => {\n    const options = [\n        { label: 'Green', value: 'green' },\n        { label: 'Red', value: 'red' },\n        { label: 'Yellow', value: 'yellow' }\n    ]\n    const [selected, setSelected] = useState(options[0]);\n    const [term, setTerm] = useState('');\n    const [debouncedTerm, setDebouncedTerm] = useState(term);\n    const [results, setResults] = useState([]);\n    const [bkgColor, setBkgColor] = useState(options[2].value);\n\n    //console.log(results);\n    //always invoked on mount \n    //and when any value changes in the dependancy array\n\n    useEffect(() => {\n        /*\n        const timerId = setTimeout(() => {\n            setDebouncedTerm(term);\n        }, 1000);\n\n        return () => {\n            clearTimeout(timerId);\n        };\n        */\n       debounceType(setDebouncedTerm, term);\n    }, [term]);\n\n    useEffect(() => {\n        const search = async () => {\n            const { data } = await axios.get('https://en.wikipedia.org/w/api.php', {\n                params: {\n                    action: 'query',\n                    list: 'search',\n                    origin: '*',\n                    format: 'json',\n                    srsearch: debouncedTerm\n                }\n            });\n            setResults(data.query.search);\n        };\n        if (debouncedTerm && !results.length) { \n            search() \n        } else {\n            const timeoutId = setTimeout(() => {\n                if (debouncedTerm) { search() }\n            }, 1000);\n\n            return () => {\n                clearTimeout(timeoutId);\n            };\n        }\n    }, [debouncedTerm, results.length]);\n    const goToLink = (link) => window.location.href=link;\n    \n    const renderedLinkResults = results.map((result) => {\n        return (\n            <a \n                href={`https://en.wikipedia.org?curid=${result.pageid}`} \n                className='maxWidth400 button p-10 lowerBorder pointer color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </a>\n        )\n    });\n    const renderedDivResults = results.map((result) => {\n        return (\n            <div \n                onClick={() => goToLink(`https://en.wikipedia.org?curid=${result.pageid}`)} \n                className='maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </div>\n        )\n    });\n    console.log(`selected: ${selected.value}`)\n    const selectedBackground = `bg-${selected.value}`;\n    return (\n        <div className=\"m-20\">\n            <div className='directory sides-auto'>\n                <DropDown \n                    label='Select a color:' \n                    options={options} \n                    selected={selected} \n                    onSelectionChange={setSelected}\n                />\n            </div>\n            <div className='ui form mt-20'>\n                <div className={`flexContainer ${selectedBackground} r-10 p-10`}>\n                    <label className='greet flex2Column10Percent p-10'><span>Search: </span></label>\n                    <input \n                        value={term} \n                        onChange={e => setTerm(e.target.value)}\n                        className='input flex2Column'\n                    />\n                </div>\n            </div>\n            <div className='ui celled list'>{renderedDivResults}</div>\n        </div>\n    )\n};\n\nexport default WikiSearch;"]},"metadata":{},"sourceType":"module"}