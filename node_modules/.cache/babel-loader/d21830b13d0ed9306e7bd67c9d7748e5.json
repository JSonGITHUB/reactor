{"ast":null,"code":"import _regeneratorRuntime from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import debounceType from'./DebouncerType.js';import SearchBar from'./SearchBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WikiSearch=function WikiSearch(){var options=[{label:'Green',value:'green'},{label:'Red',value:'red'},{label:'Yellow',value:'yellow'}];// eslint-disable-next-line\nvar _useState=useState(options[0]),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),term=_useState4[0],setTerm=_useState4[1];var _useState5=useState(term),_useState6=_slicedToArray(_useState5,2),debouncedTerm=_useState6[0],setDebouncedTerm=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),results=_useState8[0],setResults=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(options[2].value),_useState10=_slicedToArray(_useState9,2),bkgColor=_useState10[0],setBkgColor=_useState10[1];//console.log(results);\n//always invoked on mount \n//and when any value changes in the dependancy array\nuseEffect(function(){/*\n        const timerId = setTimeout(() => {\n            setDebouncedTerm(term);\n        }, 1000);\n\n        return () => {\n            clearTimeout(timerId);\n        };\n        */debounceType(setDebouncedTerm,term);},[term]);useEffect(function(){var search=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://en.wikipedia.org/w/api.php',{params:{action:'query',list:'search',origin:'*',format:'json',srsearch:debouncedTerm}});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setResults(data.query.search);case 5:case\"end\":return _context.stop();}},_callee);}));return function search(){return _ref.apply(this,arguments);};}();if(debouncedTerm&&!results.length){search();}else{var timeoutId=setTimeout(function(){if(debouncedTerm){search();}},1000);return function(){clearTimeout(timeoutId);};}},[debouncedTerm,results.length]);var goToLink=function goToLink(link){return window.location.href=link;};// eslint-disable-next-line\nvar renderedLinkResults=results.map(function(result){return/*#__PURE__*/_jsxs(\"a\",{href:\"https://en.wikipedia.org?curid=\".concat(result.pageid),className:\"maxWidth400 button p-10 lowerBorder pointer color-yellow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-yellow bold p-10 columnLeft\",children:result.title}),/*#__PURE__*/_jsx(\"div\",{className:\"p-10 mb-5 columnLeft white\",children:/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:result.snippet}})})]},result.pageid);});var renderedDivResults=results.map(function(result){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return goToLink(\"https://en.wikipedia.org?curid=\".concat(result.pageid));},className:\"maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-yellow bold p-10 columnLeft\",children:result.title}),/*#__PURE__*/_jsx(\"div\",{className:\"p-10 mb-5 columnLeft white\",children:/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:result.snippet}})})]},result.pageid);});var submit=function submit(e){e.preventDefault();//console.log(`submit =>\\nterm: ${term}`)\n};//console.log(`selected: ${selected.value}`)\n// eslint-disable-next-line\nvar selectedBackground=\"bg-\".concat(selected.value);return/*#__PURE__*/_jsxs(\"div\",{className:\"m-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(SearchBar,{onSubmit:submit,onChange:setTerm,label:\"search wikipedia\",term:term})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-88\",children:renderedDivResults})]});};export default WikiSearch;","map":{"version":3,"names":["React","useState","useEffect","axios","debounceType","SearchBar","jsx","_jsx","jsxs","_jsxs","WikiSearch","options","label","value","_useState","_useState2","_slicedToArray","selected","setSelected","_useState3","_useState4","term","setTerm","_useState5","_useState6","debouncedTerm","setDebouncedTerm","_useState7","_useState8","results","setResults","_useState9","_useState10","bkgColor","setBkgColor","search","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","params","action","list","origin","format","srsearch","sent","query","stop","apply","arguments","length","timeoutId","setTimeout","clearTimeout","goToLink","link","window","location","href","renderedLinkResults","map","result","concat","pageid","className","children","title","dangerouslySetInnerHTML","__html","snippet","renderedDivResults","onClick","submit","e","preventDefault","selectedBackground","onSubmit","onChange"],"sources":["/Users/js/Dev/my-first-reactor/src/components/utils/WikiSearch.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport debounceType from './DebouncerType.js';\nimport SearchBar from './SearchBar';\n\nconst WikiSearch = () => {\n    const options = [\n        { label: 'Green', value: 'green' },\n        { label: 'Red', value: 'red' },\n        { label: 'Yellow', value: 'yellow' }\n    ]\n    // eslint-disable-next-line\n    const [selected, setSelected] = useState(options[0]);\n    const [term, setTerm] = useState('');\n    const [debouncedTerm, setDebouncedTerm] = useState(term);\n    const [results, setResults] = useState([]);\n    // eslint-disable-next-line\n    const [bkgColor, setBkgColor] = useState(options[2].value);\n\n    //console.log(results);\n    //always invoked on mount \n    //and when any value changes in the dependancy array\n\n    useEffect(() => {\n        /*\n        const timerId = setTimeout(() => {\n            setDebouncedTerm(term);\n        }, 1000);\n\n        return () => {\n            clearTimeout(timerId);\n        };\n        */\n       debounceType(setDebouncedTerm, term);\n    }, [term]);\n\n    useEffect(() => {\n        const search = async () => {\n            const { data } = await axios.get('https://en.wikipedia.org/w/api.php', {\n                params: {\n                    action: 'query',\n                    list: 'search',\n                    origin: '*',\n                    format: 'json',\n                    srsearch: debouncedTerm\n                }\n            });\n            setResults(data.query.search);\n        };\n        if (debouncedTerm && !results.length) { \n            search() \n        } else {\n            const timeoutId = setTimeout(() => {\n                if (debouncedTerm) { search() }\n            }, 1000);\n\n            return () => {\n                clearTimeout(timeoutId);\n            };\n        }\n    }, [debouncedTerm, results.length]);\n    const goToLink = (link) => window.location.href=link;\n    // eslint-disable-next-line\n    const renderedLinkResults = results.map((result) => {\n        return (\n            <a \n                href={`https://en.wikipedia.org?curid=${result.pageid}`} \n                className='maxWidth400 button p-10 lowerBorder pointer color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </a>\n        )\n    });\n    const renderedDivResults = results.map((result) => {\n        return (\n            <div \n                onClick={() => goToLink(`https://en.wikipedia.org?curid=${result.pageid}`)} \n                className='maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </div>\n        )\n    });\n    const submit = e =>  {\n        e.preventDefault();\n        //console.log(`submit =>\\nterm: ${term}`)\n    }\n    //console.log(`selected: ${selected.value}`)\n    // eslint-disable-next-line\n    const selectedBackground = `bg-${selected.value}`;\n    return (\n        <div className=\"m-20\">\n            <div className='input'>\n                <SearchBar onSubmit={submit} onChange={setTerm} label='search wikipedia' term={term}/>\n            </div>\n            <div className='mt-88'>{renderedDivResults}</div>\n        </div>\n    )\n};\n\nexport default WikiSearch;"],"mappings":"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"},"metadata":{},"sourceType":"module"}