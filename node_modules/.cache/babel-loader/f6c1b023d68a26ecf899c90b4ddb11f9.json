{"ast":null,"code":"import _slicedToArray from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Loader from\"../utils/Loader.js\";import{jsx as _jsx}from\"react/jsx-runtime\";var Geolocate=function Geolocate(_ref){var isMotionOn=_ref.isMotionOn,returnCurrentPosition=_ref.returnCurrentPosition,currentPositionExists=_ref.currentPositionExists;var _useState=useState({longitude:null,latitude:null,errorMessage:null,returnCurrentPosition:returnCurrentPosition,currentPositionExists:currentPositionExists}),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];useEffect(function(){var getCurrentPosition=function getCurrentPosition(){window.navigator.geolocation.getCurrentPosition(//position => console.log(position.coords.longitude),\nfunction(position){var _position$coords=position.coords,longitude=_position$coords.longitude,latitude=_position$coords.latitude;returnCurrentPosition(longitude,latitude);if(Math.abs(status.longitude-longitude)>2||Math.abs(status.latitude-latitude)>2){console.log(\"getCurrentPosition => coords ^^^^^^^^^^^ \".concat(longitude,\", \").concat(latitude));setStatus({longitude:longitude,latitude:latitude,errorMessage:null,returnCurrentPosition:returnCurrentPosition,currentPositionExists:currentPositionExists});}/*\n                    try {\n                        //if (!currentPositionExists()) {\n                            returnCurrentPosition(position.coords.longitude, position.coords.latitude);\n                        //}\n                    }catch(err) {\n                    }\n                    */},function(err){console.log(err);setStatus({longitude:status.longitude,latitude:status.latitude,errorMessage:err.message,returnCurrentPosition:returnCurrentPosition,currentPositionExists:currentPositionExists});});};var tick=function tick(){getCurrentPosition();};var timerID=setInterval(function(){return tick();},5000);return function cleanUp(){clearInterval(timerID);};},[currentPositionExists,returnCurrentPosition,status]);var getLocation=function getLocation(){return\"\".concat(status.latitude.toFixed(6),\", \").concat(status.longitude.toFixed(6),\" \");};var percent=window.innerWidth<700?\"twentyfivePercent mt--70 mb--70\":\"fiftyPercent mt--40 mb--40\";var loading=function loading(){return/*#__PURE__*/_jsx(\"div\",{className:percent,children:/*#__PURE__*/_jsx(Loader,{isMotionOn:isMotionOn})});};// eslint-disable-next-line\nvar latlon=function latlon(){return status.latitude+\",\"+status.longitude;};var latitude=status.latitude,errorMessage=status.errorMessage;var errorExists=errorMessage?true:false;var latExists=latitude?true:false;var errMessage=errorMessage;var geolocationStatus=latExists?getLocation():loading();geolocationStatus=errorExists?\"\".concat(errMessage):geolocationStatus;/*\n    if (latExists) {\n        if (!currentPositionExists()) {\n            returnCurrentPosition(status.longitude, status.latitude);\n        }\n    }\n    */return/*#__PURE__*/_jsx(\"div\",{className:\"r-10 m-5 bg-darker p-10 width-100-pecent color-yellow greet\",children:geolocationStatus});};export default Geolocate;","map":{"version":3,"names":["React","useState","useEffect","Loader","jsx","_jsx","Geolocate","_ref","isMotionOn","returnCurrentPosition","currentPositionExists","_useState","longitude","latitude","errorMessage","_useState2","_slicedToArray","status","setStatus","getCurrentPosition","window","navigator","geolocation","position","_position$coords","coords","Math","abs","console","log","concat","err","message","tick","timerID","setInterval","cleanUp","clearInterval","getLocation","toFixed","percent","innerWidth","loading","className","children","latlon","errorExists","latExists","errMessage","geolocationStatus"],"sources":["/Users/js/Dev/my-first-reactor/src/components/utils/Geolocator.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Loader from \"../utils/Loader.js\";\n\nconst Geolocate = ({\n  isMotionOn,\n  returnCurrentPosition,\n  currentPositionExists,\n}) => {\n  const [status, setStatus] = useState({\n    longitude: null,\n    latitude: null,\n    errorMessage: null,\n    returnCurrentPosition: returnCurrentPosition,\n    currentPositionExists: currentPositionExists,\n  });\n\n  useEffect(() => {\n    const getCurrentPosition = () => {\n      window.navigator.geolocation.getCurrentPosition(\n        //position => console.log(position.coords.longitude),\n        (position) => {\n          const { longitude, latitude } = position.coords;\n          returnCurrentPosition(longitude, latitude);\n          if ((Math.abs(status.longitude - longitude)>2) || (Math.abs(status.latitude - latitude)>(2))) {\n            console.log(`getCurrentPosition => coords ^^^^^^^^^^^ ${longitude}, ${latitude}`)\n            setStatus({\n              longitude: longitude,\n              latitude: latitude,\n              errorMessage: null,\n              returnCurrentPosition: returnCurrentPosition,\n              currentPositionExists: currentPositionExists,\n            });\n          }\n          /*\n                    try {\n                        //if (!currentPositionExists()) {\n                            returnCurrentPosition(position.coords.longitude, position.coords.latitude);\n                        //}\n                    }catch(err) {\n                    }\n                    */\n        },\n        (err) => {\n          console.log(err);\n          setStatus({\n            longitude: status.longitude,\n            latitude: status.latitude,\n            errorMessage: err.message,\n            returnCurrentPosition: returnCurrentPosition,\n            currentPositionExists: currentPositionExists,\n          });\n        }\n      );\n    };\n    const tick = () => {\n      getCurrentPosition();\n    };\n    const timerID = setInterval(() => tick(), 5000);\n    return function cleanUp() {\n      clearInterval(timerID);\n    };\n  }, [currentPositionExists, returnCurrentPosition, status]);\n  const getLocation = () =>\n    `${status.latitude.toFixed(6)}, ${status.longitude.toFixed(6)} `;\n  const percent =\n    window.innerWidth < 700\n      ? \"twentyfivePercent mt--70 mb--70\"\n      : \"fiftyPercent mt--40 mb--40\";\n  const loading = () => (\n    <div className={percent}>\n      <Loader isMotionOn={isMotionOn} />\n    </div>\n  );\n  // eslint-disable-next-line\n  const latlon = () => status.latitude + \",\" + status.longitude;\n  const { latitude, errorMessage } = status;\n  const errorExists = errorMessage ? true : false;\n  const latExists = latitude ? true : false;\n  const errMessage = errorMessage;\n  let geolocationStatus = latExists ? getLocation() : loading();\n  geolocationStatus = errorExists ? `${errMessage}` : geolocationStatus;\n  /*\n    if (latExists) {\n        if (!currentPositionExists()) {\n            returnCurrentPosition(status.longitude, status.latitude);\n        }\n    }\n    */\n  return <div className=\"r-10 m-5 bg-darker p-10 width-100-pecent color-yellow greet\">{geolocationStatus}</div>;\n};\n\nexport default Geolocate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}