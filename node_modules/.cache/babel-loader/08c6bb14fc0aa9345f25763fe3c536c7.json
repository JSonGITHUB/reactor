{"ast":null,"code":"import _regeneratorRuntime from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import SearchBar from'./SearchBar';import UnSplash from'./UnSplash';import config from'../apis/config';import GridImage from'./GridImage';import getKey from'./KeyGenerator.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Photos=function Photos(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),keyword=_useState2[0],setTerm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),photos=_useState4[0],setPhotos=_useState4[1];var KEY='Client-ID '+config.unsplashAPI_KEY;var api=config.unsplashAPI_BASE_URL;//console.log(`KEY: ${KEY}\\napi: ${api}`)\nvar onChange=function onChange(value){return setTerm(value);};var getImageSize=function getImageSize(item){if(window.innerWidth>=1080){return item.urls.regular;}else{return item.urls.small;}};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(term,callback){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return UnSplash.get(api,{params:{query:term},headers:{Authorization:KEY//need to get key\n}}).then(function(response){var images=[];//console.log(`response.data.results: ${response.data.results}`)\nresponse.data.results.forEach(function(item){images.push({'image':getImageSize(item),'description':item.alt_description,'location':item.user.location});});setPhotos(images);return callback(images);});case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x,_x2){return _ref.apply(this,arguments);};}();var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),menuArray=_useState6[0],setMenuArray=_useState6[1];var updateArray=function updateArray(array){//console.log(`menuArray: ${JSON.stringify(array, null, 2)}`)\nsetMenuArray(array);};var onFormSubmit=function onFormSubmit(event){event.preventDefault();console.log(\"Search Term: \".concat(keyword));onSubmit(keyword,updateArray);};// eslint-disable-next-line\nvar clearMenu=function clearMenu(){return menuArray.length>0?setMenuArray([]):null;};var getImage=function getImage(item){return/*#__PURE__*/_jsx(GridImage,{item:item},getKey(\"thumb\"));};/*\n    componentDidMount() {\n        if(window.location.pathname.indexOf(\"Photos\") > -1) {\n            this.clearMenu();\n            this.props.onSubmit('surfing pipeline', this.updateArray);\n        }\n        \n    }\n    */return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(SearchBar,{onSubmit:onFormSubmit,onChange:onChange,label:\"search for photos\",api:api,KEY:KEY,term:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-88 white p-10\",children:[photos.length,\" photos.\"]}),menuArray.map(function(item){return getImage(item);})]});};export default Photos;","map":{"version":3,"names":["React","useState","SearchBar","UnSplash","config","GridImage","getKey","jsx","_jsx","jsxs","_jsxs","Photos","_useState","_useState2","_slicedToArray","keyword","setTerm","_useState3","_useState4","photos","setPhotos","KEY","unsplashAPI_KEY","api","unsplashAPI_BASE_URL","onChange","value","getImageSize","item","window","innerWidth","urls","regular","small","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","term","callback","response","wrap","_callee$","_context","prev","next","get","params","query","headers","Authorization","then","images","data","results","forEach","push","alt_description","user","location","sent","stop","_x","_x2","apply","arguments","_useState5","_useState6","menuArray","setMenuArray","updateArray","array","onFormSubmit","event","preventDefault","console","log","concat","clearMenu","length","getImage","Fragment","children","className","label","map"],"sources":["/Users/js/Dev/my-first-reactor/src/components/utils/Photos.js"],"sourcesContent":["import React, {useState} from 'react';\nimport SearchBar from './SearchBar';\nimport UnSplash from './UnSplash';\nimport config from '../apis/config';\nimport GridImage from './GridImage'\nimport getKey from './KeyGenerator.js';\n\nconst Photos = () => {\n\n    const [keyword, setTerm] = useState('');\n    const [photos, setPhotos] = useState([]);\n    const KEY = 'Client-ID '+config.unsplashAPI_KEY;\n    const api = config.unsplashAPI_BASE_URL;\n    //console.log(`KEY: ${KEY}\\napi: ${api}`)\n    \n    const onChange = (value) => setTerm(value);\n    const getImageSize = (item) => {\n        if (window.innerWidth >= 1080) {\n            return item.urls.regular;\n        } else {\n            return item.urls.small;\n        }\n    }\n    const onSubmit = async (term, callback) => {\n        // eslint-disable-next-line\n        const response = await UnSplash.get(api, {\n                params: {query: term},\n                headers: {\n                    Authorization: KEY//need to get key\n                }\n            })\n            .then (response => {\n                const images = [];\n                //console.log(`response.data.results: ${response.data.results}`)\n                response.data.results.forEach(item => {\n                    images.push({\n                        'image': getImageSize(item),\n                        'description': item.alt_description,\n                        'location': item.user.location\n                    });\n                });\n                setPhotos(images);\n                return callback(images)\n            });\n    }\n    const [menuArray, setMenuArray] = useState([]);\n    const updateArray = (array) => {\n        //console.log(`menuArray: ${JSON.stringify(array, null, 2)}`)\n        setMenuArray(array);\n    }\n    const onFormSubmit = event =>  {\n        event.preventDefault();\n        console.log(`Search Term: ${keyword}`);\n        onSubmit(keyword, updateArray);\n    }\n    // eslint-disable-next-line\n    const clearMenu = () => (menuArray.length>0) ? setMenuArray([]) : null;\n    \n    const getImage = (item) => <GridImage key={getKey(\"thumb\")} item={item}></GridImage>\n    /*\n    componentDidMount() {\n        if(window.location.pathname.indexOf(\"Photos\") > -1) {\n            this.clearMenu();\n            this.props.onSubmit('surfing pipeline', this.updateArray);\n        }\n        \n    }\n    */\n    return (\n        <React.Fragment>\n            <div className='input'>\n                <SearchBar onSubmit={onFormSubmit} onChange={onChange} label='search for photos' api={api} KEY={KEY} term=''/>\n            </div>\n            <div className='mt-88 white p-10'>\n                {photos.length} photos.\n            </div>\n            {menuArray.map((item) => getImage(item))} \n        </React.Fragment>\n    )\n}\nexport default Photos;"],"mappings":"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"},"metadata":{},"sourceType":"module"}