{"ast":null,"code":"import _defineProperty from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import menu from'../../assets/images/menuYellow.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ExchangeRatesConfig=function ExchangeRatesConfig(_ref){var onExchangeRatesChange=_ref.onExchangeRatesChange;var defaultRates={USD:1,MXN:17.16,// Mexican Peso\nNIO:36.55,// Nicaraguan Cordovas\nCRC:541.23,// Costa Rican Colones\nIDR:15045.30,// Indonesian Rupiah\nAUD:1.50// Australian Dollar\n};var _useState=useState(defaultRates),_useState2=_slicedToArray(_useState,2),exchangeRates=_useState2[0],setExchangeRates=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),settings=_useState4[0],setSettings=_useState4[1];useEffect(function(){var savedExchangeRates=JSON.parse(localStorage.getItem('exchangeRates'))||{};var fetchRates=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:3002/currency');case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(\"data: \".concat(JSON.stringify(data.date,null,2)));console.log(\"data: \".concat(JSON.stringify(data.timestamp,null,2)));console.log(\"data: \".concat(JSON.stringify(data.rates,null,2)));setExchangeRates(data.rates);onExchangeRatesChange(exchangeRates);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);//console.error('Error fetching exchange rates:', error);\nsetExchangeRates(defaultRates);onExchangeRatesChange(exchangeRates);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return function fetchRates(){return _ref2.apply(this,arguments);};}();var isObjectEmpty=function isObjectEmpty(obj){return Object.keys(obj).length===0&&obj.constructor===Object;};var currentExchangeRates=!isObjectEmpty(savedExchangeRates)?savedExchangeRates:fetchRates();if(!isObjectEmpty(currentExchangeRates)&&currentExchangeRates===savedExchangeRates){setExchangeRates(currentExchangeRates);onExchangeRatesChange(exchangeRates);}},[]);useEffect(function(){localStorage.setItem('exchangeRates',JSON.stringify(exchangeRates));onExchangeRatesChange(exchangeRates);},[exchangeRates]);useEffect(function(){localStorage.setItem('exchangeRates',JSON.stringify(exchangeRates));onExchangeRatesChange(exchangeRates);// Invoke the callback when rates change\n},[exchangeRates,onExchangeRatesChange]);var toggleSettings=function toggleSettings(){setSettings(!settings);};var handleRateChange=function handleRateChange(rate,value){console.log(\"handleRateChange 1 - value: \".concat(value,\" rate: \").concat(rate));setExchangeRates(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},rate,value));});onExchangeRatesChange(exchangeRates);};var handleRateEnter=function handleRateEnter(e){console.log(\"handleRateEnter:1 - key: \".concat(e.key));if(e.key==='Enter'){console.log(\"handleRateEnter:2 - key: \".concat(e.key));toggleSettings();}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"color-yellow button\",src:menu,alt:\"open menu\",onClick:function onClick(){return toggleSettings();}})}),settings?Object.keys(exchangeRates).map(function(rate){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"p-20 m-5 color-lite bold\",htmlFor:rate,children:rate}),/*#__PURE__*/_jsx(\"input\",{className:\"p-20 m-5 color-lite bold bg-black\",type:\"number\",id:rate,value:exchangeRates[rate],onChange:function onChange(e){return handleRateChange(rate,e.target.value);},onKeyDown:function onKeyDown(e){return handleRateEnter(e);}})]},rate);}):/*#__PURE__*/_jsx(\"div\",{})]});};export default ExchangeRatesConfig;","map":{"version":3,"names":["React","useState","useEffect","menu","jsx","_jsx","jsxs","_jsxs","ExchangeRatesConfig","_ref","onExchangeRatesChange","defaultRates","USD","MXN","NIO","CRC","IDR","AUD","_useState","_useState2","_slicedToArray","exchangeRates","setExchangeRates","_useState3","_useState4","settings","setSettings","savedExchangeRates","JSON","parse","localStorage","getItem","fetchRates","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","console","log","concat","stringify","date","timestamp","rates","t0","stop","apply","arguments","isObjectEmpty","obj","Object","keys","length","constructor","currentExchangeRates","setItem","toggleSettings","handleRateChange","rate","value","prevState","_objectSpread","_defineProperty","handleRateEnter","e","key","children","className","src","alt","onClick","map","htmlFor","type","id","onChange","target","onKeyDown"],"sources":["/Users/js/Dev/my-first-reactor/src/components/utils/ExchangeRatesConfig.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport menu from '../../assets/images/menuYellow.png';\n\nconst ExchangeRatesConfig = ({ onExchangeRatesChange }) => {\n\n    const defaultRates = {\n        USD: 1,\n        MXN: 17.16,   // Mexican Peso\n        NIO: 36.55,   // Nicaraguan Cordovas\n        CRC: 541.23,    // Costa Rican Colones\n        IDR: 15045.30,  // Indonesian Rupiah\n        AUD: 1.50,    // Australian Dollar\n    }\n\n    const [exchangeRates, setExchangeRates] = useState(defaultRates);\n    const [settings, setSettings] = useState(false);\n\n    useEffect(() => {\n\n        const savedExchangeRates = JSON.parse(localStorage.getItem('exchangeRates')) || {};\n\n        const fetchRates = async () => {\n            try {\n                //const response = await fetch('https://api.exchangeratesapi.io/v1/' + endpoint + '?access_key=' + access_key + '&from=' + from + '&to=' + to + '&amount=' + amount);\n                const response = await fetch('http://localhost:3002/currency');\n                const data = await response.json();\n\n                console.log(`data: ${JSON.stringify(data.date, null, 2)}`);\n                console.log(`data: ${JSON.stringify(data.timestamp, null, 2)}`);\n                console.log(`data: ${JSON.stringify(data.rates, null, 2)}`);\n\n                setExchangeRates(data.rates);\n                onExchangeRatesChange(exchangeRates)\n            } catch (error) {\n                //console.error('Error fetching exchange rates:', error);\n                setExchangeRates(defaultRates);\n                onExchangeRatesChange(exchangeRates)\n            }\n        };\n        const isObjectEmpty = (obj) => Object.keys(obj).length === 0 && obj.constructor === Object;\n        const currentExchangeRates = (!isObjectEmpty(savedExchangeRates)) ? savedExchangeRates : fetchRates();\n        \n        if (!isObjectEmpty(currentExchangeRates) && (currentExchangeRates === savedExchangeRates)) {\n            setExchangeRates(currentExchangeRates);\n            onExchangeRatesChange(exchangeRates);\n        }\n\n    }, []);\n\n    useEffect(() => {\n        localStorage.setItem('exchangeRates', JSON.stringify(exchangeRates));\n        onExchangeRatesChange(exchangeRates);\n    }, [exchangeRates]);\n\n    useEffect(() => {\n        localStorage.setItem('exchangeRates', JSON.stringify(exchangeRates));\n        onExchangeRatesChange(exchangeRates); // Invoke the callback when rates change\n    }, [exchangeRates, onExchangeRatesChange]);\n\n    const toggleSettings = () => {\n        setSettings(!settings)\n    }\n\n    const handleRateChange = (rate, value) => {\n        console.log(`handleRateChange 1 - value: ${value} rate: ${rate}`);\n        setExchangeRates(prevState => ({\n            ...prevState,\n            [rate]: value\n        }));\n        onExchangeRatesChange(exchangeRates);\n    }\n    const handleRateEnter = (e) => {\n        console.log(`handleRateEnter:1 - key: ${e.key}`);\n        if (e.key === 'Enter') {\n            console.log(`handleRateEnter:2 - key: ${e.key}`);\n            toggleSettings();\n        }\n    }\n\n    return (\n        <div>\n            <div>\n                <img className='color-yellow button' src={menu} alt=\"open menu\" onClick={() => toggleSettings()} />\n            </div>\n            {settings ? (\n                Object.keys(exchangeRates).map(rate => (\n                    <div key={rate}>\n                        <label\n                            className='p-20 m-5 color-lite bold'\n                            htmlFor={rate}\n                        >\n                            {rate}\n                        </label>\n                        <input\n                            className='p-20 m-5 color-lite bold bg-black'\n                            type=\"number\"\n                            id={rate}\n                            value={exchangeRates[rate]}\n                            onChange={e => handleRateChange(rate, e.target.value)}\n                            onKeyDown={e => handleRateEnter(e)}\n                        />\n                    </div>\n                ))\n            ) : (\n                <div></div>\n            )}\n        </div>\n    );\n\n};\n\nexport default ExchangeRatesConfig;"],"mappings":"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"},"metadata":{},"sourceType":"module"}