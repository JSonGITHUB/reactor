{"ast":null,"code":"import _classCallCheck from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/js/Dev/my-first-reactor/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import{signIn,signOut}from'../../actions';import LocalAuth from'./LocalAuth.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GoogleAuth=/*#__PURE__*/function(_React$Component){_inherits(GoogleAuth,_React$Component);var _super=_createSuper(GoogleAuth);function GoogleAuth(props){var _this;_classCallCheck(this,GoogleAuth);_this=_super.call(this,props);_this.onAuthChange=function(isSignedIn){if(isSignedIn){_this.props.signIn(_this.auth.currentUser.get().getId());}else{_this.props.signOut();}};_this.onSignInClick=function(){_this.auth.signIn();};_this.onSignOutClick=function(){_this.auth.signOut();};_this.setSignIn=function(){//console.log(`GoogleAuth => setSignIn => localSignIn: ${!this.state.localSignIn}`)\n_this.setState({localSignIn:!_this.state.localSignIn});return _this.props.setSignIn();};console.log(\"GoogleAuth => props.isSignedIn: \".concat(_this.props.isSignedIn));_this.state={localSignIn:false};return _this;}_createClass(GoogleAuth,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(\"GoogleAuth => componentDidMount(): \".concat(JSON.stringify(this.props,null,2)));window.gapi.load('client:auth2',function(){window.gapi.client.init({clientId:'708928164694-1hej0sd42volq7ng5enucjbhr6n18fl8.apps.googleusercontent.com',scope:'email'}).then(function(){_this2.auth=window.gapi.auth2.getAuthInstance();_this2.onAuthChange(_this2.auth.isSignedIn.get());_this2.auth.isSignedIn.listen(_this2.onAuthChange);});});}},{key:\"renderAuthButton\",value:function renderAuthButton(){//console.log(`GoogleAuth => this.props.isSignedIn: ${this.props.isSignedIn}`)\n//console.log(`GoogleAuth => this.state.localSignIn: ${this.state.localSignIn}`)\nif(this.props.isSignedIn===null){return/*#__PURE__*/_jsx(LocalAuth,{isSignedIn:this.state.localSignIn,setSignIn:this.setSignIn});}else if(this.state.localSignIn||this.props.isSignedIn){return/*#__PURE__*/_jsxs(\"button\",{onClick:this.onSignOutClick,className:\"ui google button\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"larger middle aligned icon user\"}),\"Sign Out\"]});}else{return/*#__PURE__*/_jsxs(\"button\",{onClick:this.onSignInClick,className:\"ui google button\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"larger middle aligned icon user\"}),\"Sign In with Google\"]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(React.Fragment,{children:this.renderAuthButton()});}}]);return GoogleAuth;}(React.Component);var mapStateToProps=function mapStateToProps(state){//console.log(`GoogleAuth => mapStateToProps => state: ${JSON.stringify(state,null,2)}`);\nreturn{isSignedIn:state.auth.isSignedIn};};export default connect(mapStateToProps,{signIn:signIn,signOut:signOut})(GoogleAuth);","map":{"version":3,"names":["React","connect","signIn","signOut","LocalAuth","jsx","_jsx","jsxs","_jsxs","GoogleAuth","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onAuthChange","isSignedIn","auth","currentUser","get","getId","onSignInClick","onSignOutClick","setSignIn","setState","localSignIn","state","console","log","concat","_createClass","key","value","componentDidMount","_this2","JSON","stringify","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","onClick","className","children","render","Fragment","Component","mapStateToProps"],"sources":["/Users/js/Dev/my-first-reactor/src/components/site/GoogleAuth.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { signIn, signOut } from '../../actions';\nimport LocalAuth from './LocalAuth.js';\n\nclass GoogleAuth extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(`GoogleAuth => props.isSignedIn: ${this.props.isSignedIn}`)\n    this.state = {\n      localSignIn: false\n    };\n  }\n  componentDidMount() {\n    console.log(`GoogleAuth => componentDidMount(): ${JSON.stringify(this.props,null,2)}`)\n    \n    window.gapi.load('client:auth2', () => {\n      window.gapi.client\n        .init({\n          clientId:\n            '708928164694-1hej0sd42volq7ng5enucjbhr6n18fl8.apps.googleusercontent.com',\n          scope: 'email'\n        })\n        .then(() => {\n          this.auth = window.gapi.auth2.getAuthInstance();\n          this.onAuthChange(this.auth.isSignedIn.get());\n          this.auth.isSignedIn.listen(this.onAuthChange);\n        });\n    });\n  }\n\n  onAuthChange = isSignedIn => {\n    if (isSignedIn) {\n      this.props.signIn(this.auth.currentUser.get().getId());\n    } else {\n      this.props.signOut();\n    }\n  };\n\n  onSignInClick = () => {\n    this.auth.signIn();\n  };\n\n  onSignOutClick = () => {\n    this.auth.signOut();\n  };\n  setSignIn = () => {\n    //console.log(`GoogleAuth => setSignIn => localSignIn: ${!this.state.localSignIn}`)\n    this.setState({ localSignIn: !this.state.localSignIn });\n    return this.props.setSignIn();\n  };\n\n  renderAuthButton() {\n    //console.log(`GoogleAuth => this.props.isSignedIn: ${this.props.isSignedIn}`)\n    //console.log(`GoogleAuth => this.state.localSignIn: ${this.state.localSignIn}`)\n\n    if (this.props.isSignedIn === null) {\n      return <LocalAuth \n                isSignedIn={this.state.localSignIn}\n                setSignIn={this.setSignIn}\n              />\n    } else if (this.state.localSignIn || this.props.isSignedIn) {\n      return (\n        <button onClick={this.onSignOutClick} className=\"ui google button\">\n          <i className=\"larger middle aligned icon user\" />\n          Sign Out\n        </button>\n      );\n    } else {\n      return (\n        <button onClick={this.onSignInClick} className=\"ui google button\">\n          <i className=\"larger middle aligned icon user\" />\n          Sign In with Google\n        </button>\n      );\n    }\n  }\n\n  render() {\n    return <React.Fragment>{this.renderAuthButton()}</React.Fragment>;\n  }\n}\n\nconst mapStateToProps = state => {\n  //console.log(`GoogleAuth => mapStateToProps => state: ${JSON.stringify(state,null,2)}`);\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(\n  mapStateToProps,\n  { signIn, signOut }\n)(GoogleAuth);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}