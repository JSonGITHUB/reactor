{"ast":null,"code":"var _jsxFileName = \"/Users/js/Dev/my-first-reactor/src/components/utils/WikiSearch.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport debounceType from './DebouncerType.js';\nimport SearchBar from './SearchBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WikiSearch = () => {\n  _s();\n  const options = [{\n    label: 'Green',\n    value: 'green'\n  }, {\n    label: 'Red',\n    value: 'red'\n  }, {\n    label: 'Yellow',\n    value: 'yellow'\n  }];\n  // eslint-disable-next-line\n  const [selected, setSelected] = useState(options[0]);\n  const [term, setTerm] = useState('');\n  const [debouncedTerm, setDebouncedTerm] = useState(term);\n  const [results, setResults] = useState([]);\n  // eslint-disable-next-line\n  const [bkgColor, setBkgColor] = useState(options[2].value);\n\n  //console.log(results);\n  //always invoked on mount \n  //and when any value changes in the dependancy array\n\n  useEffect(() => {\n    /*\n    const timerId = setTimeout(() => {\n        setDebouncedTerm(term);\n    }, 1000);\n     return () => {\n        clearTimeout(timerId);\n    };\n    */\n    debounceType(setDebouncedTerm, term);\n  }, [term]);\n  useEffect(() => {\n    const search = async () => {\n      const {\n        data\n      } = await axios.get('https://en.wikipedia.org/w/api.php', {\n        params: {\n          action: 'query',\n          list: 'search',\n          origin: '*',\n          format: 'json',\n          srsearch: debouncedTerm\n        }\n      });\n      setResults(data.query.search);\n    };\n    if (debouncedTerm && !results.length) {\n      search();\n    } else {\n      const timeoutId = setTimeout(() => {\n        if (debouncedTerm) {\n          search();\n        }\n      }, 1000);\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [debouncedTerm, results.length]);\n  const goToLink = link => window.location.href = link;\n  // eslint-disable-next-line\n  const renderedLinkResults = results.map(result => {\n    return /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `https://en.wikipedia.org?curid=${result.pageid}`,\n      className: \"maxWidth400 button p-10 lowerBorder pointer color-yellow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `color-yellow bold p-10 columnLeft`,\n        children: result.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-10 mb-5 columnLeft white\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: result.snippet\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, result.pageid, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  });\n  const renderedDivResults = results.map(result => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => goToLink(`https://en.wikipedia.org?curid=${result.pageid}`),\n      className: \"maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `color-yellow bold p-10 columnLeft`,\n        children: result.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-10 mb-5 columnLeft white\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: result.snippet\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, result.pageid, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  });\n  const submit = e => {\n    e.preventDefault();\n    //console.log(`submit =>\\nterm: ${term}`)\n  };\n  //console.log(`selected: ${selected.value}`)\n  // eslint-disable-next-line\n  const selectedBackground = `bg-${selected.value}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"m-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input\",\n      children: /*#__PURE__*/_jsxDEV(SearchBar, {\n        onSubmit: submit,\n        onChange: setTerm,\n        label: \"search wikipedia\",\n        term: term\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-88\",\n      children: renderedDivResults\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n};\n_s(WikiSearch, \"Z2qYDwYmHn8SdbnqPihV64EYCrg=\");\n_c = WikiSearch;\nexport default WikiSearch;\nvar _c;\n$RefreshReg$(_c, \"WikiSearch\");","map":{"version":3,"names":["React","useState","useEffect","axios","debounceType","SearchBar","jsxDEV","_jsxDEV","WikiSearch","_s","options","label","value","selected","setSelected","term","setTerm","debouncedTerm","setDebouncedTerm","results","setResults","bkgColor","setBkgColor","search","data","get","params","action","list","origin","format","srsearch","query","length","timeoutId","setTimeout","clearTimeout","goToLink","link","window","location","href","renderedLinkResults","map","result","pageid","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","dangerouslySetInnerHTML","__html","snippet","renderedDivResults","onClick","submit","e","preventDefault","selectedBackground","onSubmit","onChange","_c","$RefreshReg$"],"sources":["/Users/js/Dev/my-first-reactor/src/components/utils/WikiSearch.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport debounceType from './DebouncerType.js';\nimport SearchBar from './SearchBar';\n\nconst WikiSearch = () => {\n    const options = [\n        { label: 'Green', value: 'green' },\n        { label: 'Red', value: 'red' },\n        { label: 'Yellow', value: 'yellow' }\n    ]\n    // eslint-disable-next-line\n    const [selected, setSelected] = useState(options[0]);\n    const [term, setTerm] = useState('');\n    const [debouncedTerm, setDebouncedTerm] = useState(term);\n    const [results, setResults] = useState([]);\n    // eslint-disable-next-line\n    const [bkgColor, setBkgColor] = useState(options[2].value);\n\n    //console.log(results);\n    //always invoked on mount \n    //and when any value changes in the dependancy array\n\n    useEffect(() => {\n        /*\n        const timerId = setTimeout(() => {\n            setDebouncedTerm(term);\n        }, 1000);\n\n        return () => {\n            clearTimeout(timerId);\n        };\n        */\n       debounceType(setDebouncedTerm, term);\n    }, [term]);\n\n    useEffect(() => {\n        const search = async () => {\n            const { data } = await axios.get('https://en.wikipedia.org/w/api.php', {\n                params: {\n                    action: 'query',\n                    list: 'search',\n                    origin: '*',\n                    format: 'json',\n                    srsearch: debouncedTerm\n                }\n            });\n            setResults(data.query.search);\n        };\n        if (debouncedTerm && !results.length) { \n            search() \n        } else {\n            const timeoutId = setTimeout(() => {\n                if (debouncedTerm) { search() }\n            }, 1000);\n\n            return () => {\n                clearTimeout(timeoutId);\n            };\n        }\n    }, [debouncedTerm, results.length]);\n    const goToLink = (link) => window.location.href=link;\n    // eslint-disable-next-line\n    const renderedLinkResults = results.map((result) => {\n        return (\n            <a \n                href={`https://en.wikipedia.org?curid=${result.pageid}`} \n                className='maxWidth400 button p-10 lowerBorder pointer color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </a>\n        )\n    });\n    const renderedDivResults = results.map((result) => {\n        return (\n            <div \n                onClick={() => goToLink(`https://en.wikipedia.org?curid=${result.pageid}`)} \n                className='maxWidth400 button p-10 lowerBorder pointer sides-auto color-yellow' \n                key={result.pageid}\n            >\n                <div className={`color-yellow bold p-10 columnLeft`}>{result.title}</div>\n                <div className='p-10 mb-5 columnLeft white'>\n                    <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\n                </div> \n            </div>\n        )\n    });\n    const submit = e =>  {\n        e.preventDefault();\n        //console.log(`submit =>\\nterm: ${term}`)\n    }\n    //console.log(`selected: ${selected.value}`)\n    // eslint-disable-next-line\n    const selectedBackground = `bg-${selected.value}`;\n    return (\n        <div className=\"m-20\">\n            <div className='input'>\n                <SearchBar onSubmit={submit} onChange={setTerm} label='search wikipedia' term={term}/>\n            </div>\n            <div className='mt-88'>{renderedDivResults}</div>\n        </div>\n    )\n};\n\nexport default WikiSearch;"],"mappings":"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"},"metadata":{},"sourceType":"module"}