{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport useCurrentTime from \"../utils/useCurrentTime.js\";\nconst useOceanData = (component, uri) => {\n  _s();\n  const [status, setStatus] = useState({\n    oceanData: {},\n    updated: false\n  });\n  const date = useCurrentTime()[0].startTime.split(\"%\")[0];\n  const getOceanData = async () => {\n    console.log(`getOceanData => SERVER: ${component}`);\n    //console.log(`getOceanData => SERVER: ${component}\\nuri: ${uri}`);\n    const {\n      data\n    } = await axios.get(uri, {\n      params: {\n        origin: \"*\",\n        format: \"json\",\n        mode: \"cors\"\n      }\n    });\n    //console.log(`getOceanData => SERVER: ${component}: \\nstatus.updated: ${status.updated}\\nuri: ${uri}\\noceanData: ${JSON.stringify(data, null, 2)}`)\n    //console.log(`getOceanData => data.data: ${JSON.stringify(data.data, null, 2)}`)\n    //const lastElement = data.data[data.data.length-1];\n    //console.log(`getOceanData => data.data[last]: ${JSON.stringify(lastElement)}`)\n    //console.log(`getOceanData => data.data[last].v: ${lastElement.v}`)\n    //console.log(`getOceanData => data.data[last].dr: ${lastElement.dr}`)\n    //console.log(`getOceanData => data.data[last].t: ${lastElement.t}`)\n    //console.log(`getOceanData => data.data[last].d: ${lastElement.d}`)\n    //console.log(`getOceanData => data.data[last].g: ${lastElement.g}`)\n\n    localStorage.setItem(`${component}Data`, JSON.stringify(data));\n    localStorage.setItem(`${component}Date`, date);\n    setStatus(prevState => ({\n      ...prevState,\n      oceanData: data,\n      update: true\n    }));\n  };\n  useEffect(() => {\n    //console.log(`OceanData => ${ component }`)\n    let ignore = false;\n    //console.log(`useOceanData => CHECK\\nstatus.oceanData: ${JSON.stringify(status.oceanData,null,2)}\\ndate: ${date}`)\n    if (!ignore && JSON.stringify(status.oceanData) === \"{}\") {\n      getOceanData();\n    }\n    return () => {\n      ignore = true;\n    };\n  }, []);\n  return [status.oceanData, getOceanData];\n};\n_s(useOceanData, \"DJmcVVyx+D6GF1RqSfNWgX3NzJg=\", false, function () {\n  return [useCurrentTime];\n});\nexport default useOceanData;","map":{"version":3,"names":["useEffect","useState","axios","useCurrentTime","useOceanData","component","uri","_s","status","setStatus","oceanData","updated","date","startTime","split","getOceanData","console","log","data","get","params","origin","format","mode","localStorage","setItem","JSON","stringify","prevState","update","ignore"],"sources":["/Users/js/Dev/my-first-reactor/src/components/waves/useOceanData.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport useCurrentTime from \"../utils/useCurrentTime.js\";\n\nconst useOceanData = (component, uri) => {\n  const [status, setStatus] = useState({\n    oceanData: {},\n    updated: false,\n  });\n  const date = useCurrentTime()[0].startTime.split(\"%\")[0];\n  const getOceanData = async () => {\n    console.log(`getOceanData => SERVER: ${component}`);\n    //console.log(`getOceanData => SERVER: ${component}\\nuri: ${uri}`);\n    const { data } = await axios.get(uri, {\n      params: {\n        origin: \"*\",\n        format: \"json\",\n        mode: \"cors\",\n      },\n    });\n    //console.log(`getOceanData => SERVER: ${component}: \\nstatus.updated: ${status.updated}\\nuri: ${uri}\\noceanData: ${JSON.stringify(data, null, 2)}`)\n    //console.log(`getOceanData => data.data: ${JSON.stringify(data.data, null, 2)}`)\n    //const lastElement = data.data[data.data.length-1];\n    //console.log(`getOceanData => data.data[last]: ${JSON.stringify(lastElement)}`)\n    //console.log(`getOceanData => data.data[last].v: ${lastElement.v}`)\n    //console.log(`getOceanData => data.data[last].dr: ${lastElement.dr}`)\n    //console.log(`getOceanData => data.data[last].t: ${lastElement.t}`)\n    //console.log(`getOceanData => data.data[last].d: ${lastElement.d}`)\n    //console.log(`getOceanData => data.data[last].g: ${lastElement.g}`)\n\n    localStorage.setItem(`${component}Data`, JSON.stringify(data));\n    localStorage.setItem(`${component}Date`, date);\n    setStatus((prevState) => ({\n      ...prevState,\n      oceanData: data,\n      update: true,\n    }));\n  };\n  useEffect(() => {\n    //console.log(`OceanData => ${ component }`)\n    let ignore = false;\n    //console.log(`useOceanData => CHECK\\nstatus.oceanData: ${JSON.stringify(status.oceanData,null,2)}\\ndate: ${date}`)\n    if (!ignore && JSON.stringify(status.oceanData) === \"{}\") {\n      getOceanData();\n    }\n    return () => {\n      ignore = true;\n    };\n  }, []);\n\n  return [status.oceanData, getOceanData];\n};\nexport default useOceanData;\n\n\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,cAAc,MAAM,4BAA4B;AAEvD,MAAMC,YAAY,GAAGA,CAACC,SAAS,EAAEC,GAAG,KAAK;EAAAC,EAAA;EACvC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC;IACnCS,SAAS,EAAE,CAAC,CAAC;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAMC,IAAI,GAAGT,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAACU,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACxD,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/BC,OAAO,CAACC,GAAG,CAAE,2BAA0BZ,SAAU,EAAC,CAAC;IACnD;IACA,MAAM;MAAEa;IAAK,CAAC,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAACb,GAAG,EAAE;MACpCc,MAAM,EAAE;QACNC,MAAM,EAAE,GAAG;QACXC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE;MACR;IACF,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEAC,YAAY,CAACC,OAAO,CAAE,GAAEpB,SAAU,MAAK,EAAEqB,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC;IAC9DM,YAAY,CAACC,OAAO,CAAE,GAAEpB,SAAU,MAAK,EAAEO,IAAI,CAAC;IAC9CH,SAAS,CAAEmB,SAAS,KAAM;MACxB,GAAGA,SAAS;MACZlB,SAAS,EAAEQ,IAAI;MACfW,MAAM,EAAE;IACV,CAAC,CAAC,CAAC;EACL,CAAC;EACD7B,SAAS,CAAC,MAAM;IACd;IACA,IAAI8B,MAAM,GAAG,KAAK;IAClB;IACA,IAAI,CAACA,MAAM,IAAIJ,IAAI,CAACC,SAAS,CAACnB,MAAM,CAACE,SAAS,CAAC,KAAK,IAAI,EAAE;MACxDK,YAAY,CAAC,CAAC;IAChB;IACA,OAAO,MAAM;MACXe,MAAM,GAAG,IAAI;IACf,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,CAACtB,MAAM,CAACE,SAAS,EAAEK,YAAY,CAAC;AACzC,CAAC;AAACR,EAAA,CA/CIH,YAAY;EAAA,QAKHD,cAAc;AAAA;AA2C7B,eAAeC,YAAY"},"metadata":{},"sourceType":"module"}